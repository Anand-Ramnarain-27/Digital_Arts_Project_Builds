<meta name="monetization" content="$twitter.xrptipbot.com/remvst"><title>[SWAGSHOT]</title><style>/* *{margin:0;width:100%;height:100%;background:#000;position:relative}#t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#g{display:block} */</style><div id="t"><canvas id="g"></canvas></div><script src="//game-cdn.poki.com/scripts/v2/poki-sdk.js"></script><script>function revertOptimizeMatrix(t,e,i){const s=[];for(let i=0;i<t;i++){const t=[];t.length=e,s.push(t)}return i.forEach(t=>{let[e,i,a,l]=t,r=!!a,n=!!l;for(let t=0;t<max(a,l);t++)s[e+t*r][i+t*n]=1}),s}let R,G,W,P,w=window,onMenu=1,CANVAS=g;limit=((t,e,i)=>e<t?t:e>i?i:e),between=((t,e,i)=>e>=t&&e<=i),rnd=((t,e)=>random()*(e-t)+t),pick=(t=>t[~~(random()*t.length)]),distP=((t,e,i,s)=>sqrt(pow(t-i,2)+pow(e-s,2))),dist=((t,e)=>distP(t.x,t.y,e.x,e.y)),normalize=(t=>moduloWithNegative(t,PI)),angleBetween=((t,e)=>atan2(e.y-t.y,e.x-t.x));let math=Math;Object.getOwnPropertyNames(math).forEach(t=>w[t]=w[t]||math[t]),TWO_PI=2*PI;let canvasProto=CanvasRenderingContext2D.prototype;canvasProto.wrap=function(t){this.save(),t(),this.restore()},canvasProto.fr=canvasProto.fillRect,canvasProto.fs=function(t){this.fillStyle=t},onresize=(()=>{var e,i,s=innerWidth,a=innerHeight,l=s/a,r=1600/900,n=t.style;l<=r?i=(e=s)/r:e=(i=a)*r,n.width=e+"px",n.height=i+"px"}),linear=(t=>t),easeOutQuad=(t=>t*(2-t)),interp=((t,e,i,s,a,l,r,n)=>{let h={o:t,p:e,a:i,b:s,d:a,l:l||0,f:r||linear,e:n||(()=>0),t:0,cycle:t=>{if(h.l>0)h.l-=t,h.o[h.p]=h.a;else if(h.t=min(h.d,h.t+t),h.o[h.p]=h.f(h.t/h.d)*(h.b-h.a)+h.a,h.t==h.d){h.e();let t=INTERPOLATIONS.indexOf(h);t>=0&&INTERPOLATIONS.splice(t,1)}}};INTERPOLATIONS.push(h)}),INTERPOLATIONS=[],castRay=((t,e,i,s)=>{let a,l=castAgainstHorizontal(t,e,i,s),r=castAgainstVertical(t,e,i,s);if(l)if(r){a=distP(t,e,l.x,l.y)<distP(t,e,r.x,r.y)?l:r}else a=l;else a=r;return distP(t,e,a.x,a.y)>s&&(a={x:t+cos(i)*s,y:e+sin(i)*s}),a}),castAgainstHorizontal=((t,e,i,s)=>{var a=sin(i)>0,l=36*~~(e/36)+(a?36:-1e-4),r=t+(l-e)/tan(i),n=a?36:-36,h=n/tan(i);return doCast(r,l,h,n,1,s)}),castAgainstVertical=((t,e,i,s)=>{var a=cos(i)>0,l=36*~~(t/36)+(a?36:-1e-4),r=e+(l-t)*tan(i),n=a?36:-36,h=n*tan(i);return doCast(l,r,n,h,0,s)}),doCast=((t,e,i,s,a,l)=>{let r=t,n=e;for(let h=0;distP(r,n,t,e)<l;h++){if(internalHasBlock(r,n)){let t=~~(r/36)+~~(n/36)*G.level.definition.matrix.length;return{x:r,y:n,castType:a+"-"+t,blockId:t}}if(isOut(r,n))break;r+=i,n+=s}return{x:r,y:n,castType:""}}),hasBlock=((t,e,i=0)=>internalHasBlock(t,e)||internalHasBlock(t-i,e-i)||internalHasBlock(t-i,e+i)||internalHasBlock(t+i,e-i)||internalHasBlock(t+i,e+i)),internalHasBlock=((t,e)=>!isOut(t,e)&&G.level.definition.matrix[~~(e/36)][~~(t/36)]),isOut=((t,e)=>!between(0,t,36*G.level.definition.matrix[0].length-1)||!between(0,e,36*G.level.definition.matrix.length-1)),remove=((t,e)=>{let i=t.indexOf(e);i>=0&&t.splice(i,1)});class PointRenderable{constructor(t,e,i,s){this.x=t,this.y=e,this.radius=i,this.color=s}render(){R.fillStyle=this.color,fr(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}let createCanvas=(t,e,i)=>{let s=document.createElement("canvas");return s.width=t,s.height=e,i(s.getContext("2d"),s)||s},createCanvasPattern=(t,e,i)=>{let s=createCanvas(t,e,i);return s.getContext("2d").createPattern(s,"repeat")};SKY_BACKGROUND=createCanvasPattern(200,900,t=>{let e=t.createLinearGradient(0,0,0,900);t.fillStyle=e,t.fr(0,0,200,900)}),WINDOW_PATTERN=createCanvasPattern(72,72,(t,e)=>{t.fillStyle="#8c9bee",t.fillRect(0,0,999,999),t.fillStyle="#f29afb",t.fillRect(e.width/4,e.height/4,e.width/2,e.width/2)}),BUILDINGS_BACKGROUND=createCanvasPattern(800,400,(t,e)=>{t.fillStyle=WINDOW_PATTERN,t.fillRect(0,0,e.width,e.height)});class Level{constructor(t,e){this.index=t,this.definition=e,this.cyclables=[],this.renderables=[],this.stop()}start(){this.active=1,this.cyclables=[],this.renderables=[],this.player=new Player(36*(this.definition.spawn[1]+.5),36*(this.definition.spawn[0]+.5)),this.cyclables.push(this.player),this.renderables.push(this.player)}stop(){this.active=0}cycle(t){this.cyclables.forEach(e=>e.cycle(t))}render(){R.fillStyle="#29c2fd",fr(0,0,720,720),R.fillStyle="#010640";for(let t=0;t<20;t++)for(let e=0;e<20;e++)this.definition.matrix[t][e]&&fr(36*e,36*t,36,36);this.renderables.forEach(t=>t.render()),this.active||(R.fillStyle=WINDOW_PATTERN,fr(0,0,720,720))}}LEVELS=[{matrix:revertOptimizeMatrix(20,20,[[0,0,20,0],[0,1,0,19],[1,19,19,0],[4,4,1,0],[4,9,0,4],[5,5,1,0],[6,4,1,0],[7,15,0,2],[8,7,0,2],[8,10,1,0],[10,1,0,2],[10,13,0,2],[13,10,0,2],[14,7,3,0],[16,5,0,2],[19,1,0,18]]),spawn:[2,2]},{matrix:revertOptimizeMatrix(20,20,[[0,0,20,0],[0,1,0,19],[1,19,19,0],[4,4,1,0],[4,9,0,4],[5,5,1,0],[6,4,1,0],[7,15,0,2],[8,7,0,2],[8,10,1,0],[10,1,0,2],[10,13,0,2],[13,10,0,2],[14,7,3,0],[16,4,4,0],[16,5,0,2],[19,1,0,3],[19,5,0,14]]),spawn:[2,2]}].map((t,e)=>new Level(e,t));class Player{constructor(t,e){this.x=t,this.y=e,this.previous={},this.vX=this.vY=0,this.jumpHoldTime=0,this.jumpReleased=1,this.jumpStartY=0,this.jumpEndY=0,this.jumpPeakTime=0,this.wallJump=0,this.wasStickingToWallX=0,this.clock=0}get landed(){let t=this.x-15,e=this.x+15,i=this.y+15+1;return hasBlock(t,i)||hasBlock(e,i)}get sticksToWall(){if(this.landed)return 0;this.wasStickingToWallX,this.x;let t=this.x-15-1,e=this.x+15+1;return hasBlock(t,this.y)&&(w.down[37]||this.wasStickingToWallX)?(this.wasStickingToWallX=this.x,1):hasBlock(e,this.y)&&(w.down[39]||this.wasStickingToWallX)?(this.wasStickingToWallX=this.x,-1):0}cycle(t){this.previous.x=this.x,this.previous.y=this.y,this.previous.clock=this.clock,this.previous.landed=this.landed,this.previous.jumpHoldTime=this.jumpHoldTime,this.clock+=t;let e=down[32];if(this.jumpReleased=this.jumpReleased||!down[32],e?this.jumpHoldTime+=t:this.jumpHoldTime=0,e&&this.jumpReleased&&(this.landed||this.sticksToWall)&&(this.jumpReleased=0,this.jumpStartY=this.y,this.jumpStartTime=this.clock,this.wallJump=this.sticksToWall,this.vX+=800*this.wallJump),e&&!this.jumpReleased){let t=min(this.jumpHoldTime,.15)/.15,e=18+36*t*3;this.jumpPeakTime=.1+.2*t,this.jumpEndY=this.jumpStartY-e}if(this.clock<this.jumpStartTime+this.jumpPeakTime){let t=(this.clock-this.jumpStartTime)/this.jumpPeakTime;this.y=easeOutQuad(t)*(this.jumpEndY-this.jumpStartY)+this.jumpStartY}else{let e=this.sticksToWall&&this.vY>0?1e3:4e3;this.vY=max(0,this.vY+e*t),this.y+=this.vY*t}let i=0,s=0;down[37]&&(i=-1,s=-400),down[39]&&(i=1,s=400);let a=this.landed?3e3:800;this.vX+=limit(-a*t,s-this.vX,a*t),this.x+=this.vX*t,this.readjust()}goToClosestAdjustment(t,e){let i,s=999;for(let a=0;a<e.length;a++){let l=dist(t,e[a]);l<s&&(i=e[a],s=l)}return i&&(this.x=i.x,this.y=i.y),i}toCellUnit(t){return~~(t/36)}allSnapAdjustments(){let t=this.x-15,e=this.x+15,i=this.y-15,s=this.y+15,a=this.toCellUnit(t),l=this.toCellUnit(e),r=this.toCellUnit(i),n=this.toCellUnit(s),h=(hasBlock(t,i),hasBlock(e,i),hasBlock(t,s),hasBlock(e,s),[this.previous.x,this.x]),o=[this.previous.y,this.y];for(let t=a;t<=l;t++)h.push(36*t+15,36*(t+1)-15-1e-4);for(let t=r;t<=n;t++)o.push(36*t+15,36*(t+1)-15-1e-4);return h.flatMap(t=>o.map(e=>({x:t,y:e}))).filter(t=>!hasBlock(t.x,t.y,15))}readjust(){let{x:t,y:e}=this,i=this.allSnapAdjustments();this.goToClosestAdjustment(this,i);this.landed?(this.vY=min(0,this.vY),this.previous.landed||(console.log("LAND!"),this.jumpStartTime=-1)):this.y>e&&(console.log("OUCH!"),this.vY=max(0,this.vY),this.jumpStartTime=-1),this.x!=t&&(this.vX=0)}render(){wrap(()=>{translate(this.x,this.y),R.fillStyle="#f00",fr(-15,-15,30,30)});R.strokeStyle="#f00",R.fillStyle="#f00",R.globalAlpha=.2,R.lineWidth=5,beginPath();for(let t=0;t<2*PI;t+=PI/16){let e=castRay(this.x,this.y,t,400);lineTo(e.x,e.y)}fill()}}function SfxrParams(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var s=.18/i;this.b*=s,this.c*=s,this.e*=s}}}function SfxrSynth(){var t,e,i,s,a,l,r,n,h,o,c,d;this._params=new SfxrParams,this.resetManglable=function(){var t=this._params;s=100/(t.f*t.f+.001),a=100/(t.g*t.g+.001),l=1-t.h*t.h*t.h*.01,r=-t.i*t.i*t.i*1e-6,t.a||(c=.5-t.n/2,d=5e-5*-t.o),n=1+t.l*t.l*(t.l>0?-.9:10),h=0,o=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.resetManglable();var s=this._params;return t=s.b*s.b*1e5,e=s.c*s.c*1e5,i=s.e*s.e*1e5+12,3*((t+e+i)/3|0)},this.synthWave=function(u,f){var m=this._params,p=1!=m.s||m.v,y=m.v*m.v*.1,v=1+3e-4*m.w,x=m.s*m.s*m.s*.1,w=1+1e-4*m.t,S=1!=m.s,k=m.x*m.x,g=m.g,j=m.q||m.r,T=m.r*m.r*m.r*.2,P=m.q*m.q*(m.q<0?-1020:1020),R=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,b=m.d,A=m.j/2,O=m.k*m.k*.01,C=m.a,E=t,N=1/t,L=1/e,W=1/i,B=5/(1+m.u*m.u*20)*(.01+x);B>.8&&(B=.8),B=1-B;for(var I,Y,H,G,D,U,V=0,X=0,_=0,M=0,z=0,q=0,K=0,J=0,Q=0,F=0,Z=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(et=tt.length;et--;)tt[et]=rnd(-1,1);for(et=0;et<f;et++){if(V)return et;if(R&&++F>=R&&(F=0,this.resetManglable()),o&&++h>=o&&(o=0,s*=n),(s*=l+=r)>a&&(s=a,g>0&&(V=1)),Y=s,A>0&&(Y*=1+sin(Z+=O)*A),(Y|=0)<8&&(Y=8),C||((c+=d)<0?c=0:c>.5&&(c=.5)),++_>E)switch(_=0,++X){case 1:E=e;break;case 2:E=i}switch(X){case 0:M=_*N;break;case 1:M=1+2*(1-_*L)*b;break;case 2:M=1-_*W;break;case 3:M=0,V=1}j&&((H=0|(P+=T))<0?H=-H:H>1023&&(H=1023)),p&&v&&((y*=v)<1e-5?y=1e-5:y>.1&&(y=.1)),U=0;for(var it=8;it--;){if(++J>=Y&&(J%=Y,3==C))for(var st=tt.length;st--;)tt[st]=rnd(-1,1);switch(C){case 0:D=J/Y<c?.5:-.5;break;case 1:D=1-J/Y*2;break;case 2:D=.225*(((D=1.27323954*(G=6.28318531*((G=J/Y)>.5?G-1:G))+.405284735*G*G*(G<0?1:-1))<0?-1:1)*D*D-D)+D;break;case 3:D=tt[abs(32*J/Y|0)]}p&&(I=K,(x*=w)<0?x=0:x>.1&&(x=.1),S?(q+=(D-K)*x,q*=B):(K=D,q=0),z+=(K+=q)-I,D=z*=1-y),j&&($[Q%1024]=D,D+=$[(Q-H+1024)%1024],Q++),U+=D}U*=.125*M*k,u[et]=U>=1?32767:U<=-1?-32768:32767*U|0}return f}}var synth=new SfxrSynth,jsfxr=function(t){synth._params.setSettings(t);var e=synth.totalReset(),i=new Uint8Array(4*((e+1)/2|0)+44),s=2*synth.synthWave(new Uint16Array(i.buffer,44),e),a=new Uint32Array(i.buffer,0,44);a[0]=1179011410,a[1]=s+36,a[2]=1163280727,a[3]=544501094,a[4]=16,a[5]=65537,a[6]=44100,a[7]=88200,a[8]=1048578,a[9]=1635017060,a[10]=s,s+=44;for(var l=0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="data:audio/wav;base64,";l<s;l+=3){var h=i[l]<<16|i[l+1]<<8|i[l+2];n+=r[h>>18]+r[h>>12&63]+r[h>>6&63]+r[63&h]}var o=new Audio;return o.src=n,o};jumpSound=jsfxr([0,,.1434,,.1212,.4471,,.2511,,,,,,.0426,,,,,.8862,,,,,.5]),hitSound=jsfxr([1,,.0713,,.1467,.5483,,-.4465,,,,,,,,,,,1,,,.0639,,.5]),pickupSound=jsfxr([0,,.0224,.441,.1886,.6932,,,,,,,,,,,,,1,,,,,.5]),spawnSound=jsfxr([2,.28,.45,,.56,.35,,.4088,,,,,.03,.1557,,.5565,-.02,-.02,1,,,,,.5]),explosionSound=jsfxr([3,,.244,.6411,.2242,.7416,,-.2717,,,,.0171,.0346,,,,-.0305,.0244,1,,,.0275,-.0076,.5]),menuSound=jsfxr([0,,.1394,,.0864,.48,,,,,,,,.5326,,,,,1,,,.1,,.5]),saySound=jsfxr([2,.03,.1,.14,.25,.54,.3167,-.02,.3999,,.05,,,.1021,.0684,,.1287,-.1816,1,,,,,.46]),landSound=jsfxr([3,,.0118,.03,.1681,.565,,-.2343,,,,.26,.6855,,,,,,1,,,,,.2]),fixedSound=jsfxr([0,,.2098,,.4725,.3665,,.1895,,,,,,.0067,,.5437,,,1,,,,,.45]),w.down={},onkeydown=(t=>{w.down[t.keyCode]=1}),onkeyup=(t=>{w.down[t.keyCode]=0});class Game{constructor(){(G=this).clock=0,this.level=LEVELS[0],this.level.start(),this.altitude=0,this.centerLevel(this.level)}cycle(t){this.level.cycle(t),INTERPOLATIONS.slice().forEach(e=>e.cycle(t)),this.render()}centerLevel(t){interp(this,"altitude",this.altitude,this.levelY(t)-90,.5)}levelY(t){return 900-720*t.index-90-720}render(){R.fillStyle=SKY_BACKGROUND,fr(0,0,1600,900),R.fillStyle="#fff",beginPath(),arc(1400,100,50,0,2*PI,1),fill(),wrap(()=>{translate(0,-this.altitude),R.fillStyle="#000",fr(440,0,720,900);let t=LEVELS.indexOf(this.level);for(let e=max(0,t-1);e<min(LEVELS.length,t+2);e++)wrap(()=>{translate(440,this.levelY(LEVELS[e])),LEVELS[e].render()})})}}onload=(()=>{onresize(),CANVAS.width=1600,CANVAS.height=900,R=CANVAS.getContext("2d"),Object.getOwnPropertyNames(canvasProto).forEach(t=>{R[t].call&&(w[t]=canvasProto[t].bind(R))}),console.log("LOADED"),new Game;let t=Date.now(),e=()=>{let i=Date.now(),s=(i-t)/1e3;t=i,G.cycle(s),requestAnimationFrame(e)};e()});</script>