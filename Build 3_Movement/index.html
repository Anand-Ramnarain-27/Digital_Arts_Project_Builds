<meta name="monetization" content="$twitter.xrptipbot.com/remvst"><title>[SWAGSHOT]</title><style>/* *{margin:0;width:100%;height:100%;image-rendering:optimizeSpeed;background:#000;position:relative}#t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#g{display:block} */</style><div id="t"><canvas id="g"></canvas></div><script src="//game-cdn.poki.com/scripts/v2/poki-sdk.js"></script><script>function revertOptimizeMatrix(t,e,s){const i=[];for(let s=0;s<t;s++){const t=[];t.length=e,i.push(t)}return s.forEach(t=>{let[e,s,a,r]=t,n=!!a,l=!!r;for(let t=0;t<max(a,r);t++)i[e+t*n][s+t*l]=1}),i}let R,G,W,P,w=window,onMenu=1,CANVAS=g;limit=((t,e,s)=>e<t?t:e>s?s:e),between=((t,e,s)=>e>=t&&e<=s),rnd=((t,e)=>random()*(e-t)+t),pick=(t=>t[~~(random()*t.length)]),distP=((t,e,s,i)=>sqrt(pow(t-s,2)+pow(e-i,2))),dist=((t,e)=>distP(t.x,t.y,e.x,e.y)),normalize=(t=>moduloWithNegative(t,PI)),angleBetween=((t,e)=>atan2(e.y-t.y,e.x-t.x));let math=Math;Object.getOwnPropertyNames(math).forEach(t=>w[t]=w[t]||math[t]),TWO_PI=2*PI;let canvasProto=CanvasRenderingContext2D.prototype;canvasProto.wrap=function(t){this.save(),t(),this.restore()},canvasProto.fr=canvasProto.fillRect,canvasProto.fs=function(t){this.fillStyle=t},onresize=(()=>{var e,s,i=innerWidth,a=innerHeight,r=i/a,n=t.style;r<=2?s=(e=i)/2:e=2*(s=a),n.width=e+"px",n.height=s+"px"}),linear=(t=>t),easeOutQuad=(t=>t*(2-t)),interp=((t,e,s,i,a,r,n,l)=>{let h={o:t,p:e,a:s,b:i,d:a,l:r||0,f:n||linear,e:l||(()=>0),t:0,cycle:t=>{if(h.l>0)h.l-=t,h.o[h.p]=h.a;else if(h.t=min(h.d,h.t+t),h.o[h.p]=h.f(h.t/h.d)*(h.b-h.a)+h.a,h.t==h.d){h.e();let t=INTERPOLATIONS.indexOf(h);t>=0&&INTERPOLATIONS.splice(t,1)}}};INTERPOLATIONS.push(h)}),INTERPOLATIONS=[],castRay=((t,e,s,i)=>{let a,r=castAgainstHorizontal(t,e,s,i),n=castAgainstVertical(t,e,s,i);if(r)if(n){a=distP(t,e,r.x,r.y)<distP(t,e,n.x,n.y)?r:n}else a=r;else a=n;return distP(t,e,a.x,a.y)>i&&(a={x:t+cos(s)*i,y:e+sin(s)*i}),a}),castAgainstHorizontal=((t,e,s,i)=>{var a=sin(s)>0,r=40*~~(e/40)+(a?40:-1e-4),n=t+(r-e)/tan(s),l=a?40:-40,h=l/tan(s);return doCast(n,r,h,l,1,i)}),castAgainstVertical=((t,e,s,i)=>{var a=cos(s)>0,r=40*~~(t/40)+(a?40:-1e-4),n=e+(r-t)*tan(s),l=a?40:-40,h=l*tan(s);return doCast(r,n,l,h,0,i)}),doCast=((t,e,s,i,a,r)=>{let n=t,l=e;for(let h=0;distP(n,l,t,e)<r;h++){if(internalHasBlock(n,l)){let t=~~(n/40)+~~(l/40)*W.matrix.length;return{x:n,y:l,castType:a+"-"+t,blockId:t}}if(isOut(n,l))break;n+=s,l+=i}return{x:n,y:l,castType:""}}),hasBlock=((t,e,s=0)=>internalHasBlock(t,e)||internalHasBlock(t-s,e-s)||internalHasBlock(t-s,e+s)||internalHasBlock(t+s,e-s)||internalHasBlock(t+s,e+s)),internalHasBlock=((t,e)=>!isOut(t,e)&&G.level.definition.matrix[~~(e/40)][~~(t/40)]),isOut=((t,e)=>!between(0,t,40*G.level.definition.matrix[0].length-1)||!between(0,e,40*G.level.definition.matrix.length-1)),remove=((t,e)=>{let s=t.indexOf(e);s>=0&&t.splice(s,1)});class PointRenderable{constructor(t,e,s,i){this.x=t,this.y=e,this.radius=s,this.color=i}render(){R.fillStyle=this.color,fr(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}let createCanvas=(t,e,s)=>{let i=document.createElement("canvas");return i.width=t,i.height=e,s(i.getContext("2d"),i)||i},createCanvasPattern=(t,e,s)=>{let i=createCanvas(t,e,s);return i.getContext("2d").createPattern(i,"repeat")};LEVELS=[{matrix:revertOptimizeMatrix(20,20,[[0,0,20,0],[0,1,0,19],[1,19,19,0],[4,4,1,0],[4,9,0,4],[5,5,1,0],[6,4,1,0],[7,15,0,2],[10,1,0,2],[10,13,0,2],[13,10,0,2],[14,7,3,0],[16,5,0,2],[19,1,0,18]]),spawn:[2,2]}];class Level{constructor(t){this.definition=t,this.index=LEVELS.indexOf(this.definition),this.bottomY=LEVELS.length-20*this.index*40,this.cyclables=[],this.renderables=[],this.player=new Player(40*(this.definition.spawn[1]+.5),40*(this.definition.spawn[0]+.5)),this.cyclables.push(this.player),this.renderables.push(this.player)}cycle(t){this.cyclables.forEach(e=>e.cycle(t))}render(){R.fillStyle="#fff",fr(0,0,800,800),R.fillStyle="#000";for(let t=0;t<20;t++)for(let e=0;e<20;e++)this.definition.matrix[t][e]&&fr(40*e,40*t,40,40);for(let t=0;t<20;t++)fr(0,40*t,800,1),fr(40*t,0,1,800);this.renderables.forEach(t=>t.render())}}class Player{constructor(t,e){this.x=t,this.y=e,this.previous={},this.vX=this.vY=0,this.jumpHoldTime=0,this.jumpReleased=1,this.jumpStartY=0,this.jumpEndY=0,this.jumpPeakTime=0,this.wallJump=0,this.clock=0}get landed(){let t=this.x-15,e=this.x+15,s=this.y+15+1;return hasBlock(t,s)||hasBlock(e,s)}get sticksToWall(){if(this.landed)return 0;let t=this.x-15-1,e=this.x+15+1;return hasBlock(t,this.y)&&w.down[37]?1:hasBlock(e,this.y)&&w.down[39]?-1:0}cycle(t){this.previous.x=this.x,this.previous.y=this.y,this.previous.clock=this.clock,this.previous.landed=this.landed,this.previous.jumpHoldTime=this.jumpHoldTime,this.clock+=t;let e=down[32];if(this.jumpReleased=this.jumpReleased||!down[32],e?this.jumpHoldTime+=t:this.jumpHoldTime=0,e&&this.jumpReleased&&(this.landed||this.sticksToWall)&&(this.jumpReleased=0,this.jumpStartY=this.y,this.jumpStartTime=this.clock,this.wallJump=this.sticksToWall,this.vX+=800*this.wallJump),e&&!this.jumpReleased){let t=min(this.jumpHoldTime,.15)/.15,e=20+40*t*3;this.jumpPeakTime=.1+.2*t,this.jumpEndY=this.jumpStartY-e}if(this.clock<this.jumpStartTime+this.jumpPeakTime){let t=(this.clock-this.jumpStartTime)/this.jumpPeakTime;this.y=easeOutQuad(t)*(this.jumpEndY-this.jumpStartY)+this.jumpStartY}else{let e=this.sticksToWall&&this.vY>0?1e3:4e3;this.vY=max(0,this.vY+e*t),this.y+=this.vY*t}let s=0,i=0;down[37]&&(s=-1,i=-400),down[39]&&(s=1,i=400);let a=this.landed?3e3:800;this.vX+=limit(-a*t,i-this.vX,a*t),this.x+=this.vX*t,this.readjust()}goToClosestAdjustment(t,e){let s,i=999;for(let a=0;a<e.length;a++){let r=dist(t,e[a]);r<i&&(s=e[a],i=r)}return s&&(this.x=s.x,this.y=s.y),s}toCellUnit(t){return~~(t/40)}allSnapAdjustments(){let t=this.x-15,e=this.x+15,s=this.y-15,i=this.y+15,a=this.toCellUnit(t),r=this.toCellUnit(e),n=this.toCellUnit(s),l=this.toCellUnit(i),h=(hasBlock(t,s),hasBlock(e,s),hasBlock(t,i),hasBlock(e,i),[this.previous.x,this.x]),o=[this.previous.y,this.y];for(let t=a;t<=r;t++)h.push(40*t+15,40*(t+1)-15-1e-4);for(let t=n;t<=l;t++)o.push(40*t+15,40*(t+1)-15-1e-4);return h.flatMap(t=>o.map(e=>({x:t,y:e}))).filter(t=>!hasBlock(t.x,t.y,15))}readjust(){let{x:t,y:e}=this,s=this.allSnapAdjustments();this.goToClosestAdjustment(this,s);this.landed?(this.vY=min(0,this.vY),this.previous.landed||(console.log("LAND!"),this.jumpStartTime=-1)):this.y>e&&(console.log("OUCH!"),this.vY=max(0,this.vY),this.jumpStartTime=-1),this.x!=t&&(this.vX=0)}render(){wrap(()=>{translate(this.x,this.y),R.fillStyle="#f00",fr(-15,-15,30,30)})}}function SfxrParams(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var s=this.b+this.c+this.e;if(s<.18){var i=.18/s;this.b*=i,this.c*=i,this.e*=i}}}function SfxrSynth(){var t,e,s,i,a,r,n,l,h,o,c,d;this._params=new SfxrParams,this.resetManglable=function(){var t=this._params;i=100/(t.f*t.f+.001),a=100/(t.g*t.g+.001),r=1-t.h*t.h*t.h*.01,n=-t.i*t.i*t.i*1e-6,t.a||(c=.5-t.n/2,d=5e-5*-t.o),l=1+t.l*t.l*(t.l>0?-.9:10),h=0,o=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.resetManglable();var i=this._params;return t=i.b*i.b*1e5,e=i.c*i.c*1e5,s=i.e*i.e*1e5+12,3*((t+e+s)/3|0)},this.synthWave=function(u,f){var m=this._params,p=1!=m.s||m.v,y=m.v*m.v*.1,v=1+3e-4*m.w,x=m.s*m.s*m.s*.1,w=1+1e-4*m.t,k=1!=m.s,j=m.x*m.x,S=m.g,g=m.q||m.r,b=m.r*m.r*m.r*.2,P=m.q*m.q*(m.q<0?-1020:1020),T=m.p?32+((1-m.p)*(1-m.p)*2e4|0):0,A=m.d,C=m.j/2,O=m.k*m.k*.01,R=m.a,E=t,B=1/t,Y=1/e,H=1/s,L=5/(1+m.u*m.u*20)*(.01+x);L>.8&&(L=.8),L=1-L;for(var N,I,W,V,U,G,M=0,z=0,q=0,D=0,X=0,_=0,J=0,Q=0,F=0,K=0,Z=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(et=tt.length;et--;)tt[et]=rnd(-1,1);for(et=0;et<f;et++){if(M)return et;if(T&&++K>=T&&(K=0,this.resetManglable()),o&&++h>=o&&(o=0,i*=l),(i*=r+=n)>a&&(i=a,S>0&&(M=1)),I=i,C>0&&(I*=1+sin(Z+=O)*C),(I|=0)<8&&(I=8),R||((c+=d)<0?c=0:c>.5&&(c=.5)),++q>E)switch(q=0,++z){case 1:E=e;break;case 2:E=s}switch(z){case 0:D=q*B;break;case 1:D=1+2*(1-q*Y)*A;break;case 2:D=1-q*H;break;case 3:D=0,M=1}g&&((W=0|(P+=b))<0?W=-W:W>1023&&(W=1023)),p&&v&&((y*=v)<1e-5?y=1e-5:y>.1&&(y=.1)),G=0;for(var st=8;st--;){if(++Q>=I&&(Q%=I,3==R))for(var it=tt.length;it--;)tt[it]=rnd(-1,1);switch(R){case 0:U=Q/I<c?.5:-.5;break;case 1:U=1-Q/I*2;break;case 2:U=.225*(((U=1.27323954*(V=6.28318531*((V=Q/I)>.5?V-1:V))+.405284735*V*V*(V<0?1:-1))<0?-1:1)*U*U-U)+U;break;case 3:U=tt[abs(32*Q/I|0)]}p&&(N=J,(x*=w)<0?x=0:x>.1&&(x=.1),k?(_+=(U-J)*x,_*=L):(J=U,_=0),X+=(J+=_)-N,U=X*=1-y),g&&($[F%1024]=U,U+=$[(F-W+1024)%1024],F++),G+=U}G*=.125*D*j,u[et]=G>=1?32767:G<=-1?-32768:32767*G|0}return f}}var synth=new SfxrSynth,jsfxr=function(t){synth._params.setSettings(t);var e=synth.totalReset(),s=new Uint8Array(4*((e+1)/2|0)+44),i=2*synth.synthWave(new Uint16Array(s.buffer,44),e),a=new Uint32Array(s.buffer,0,44);a[0]=1179011410,a[1]=i+36,a[2]=1163280727,a[3]=544501094,a[4]=16,a[5]=65537,a[6]=44100,a[7]=88200,a[8]=1048578,a[9]=1635017060,a[10]=i,i+=44;for(var r=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="data:audio/wav;base64,";r<i;r+=3){var h=s[r]<<16|s[r+1]<<8|s[r+2];l+=n[h>>18]+n[h>>12&63]+n[h>>6&63]+n[63&h]}var o=new Audio;return o.src=l,o};jumpSound=jsfxr([0,,.1434,,.1212,.4471,,.2511,,,,,,.0426,,,,,.8862,,,,,.5]),hitSound=jsfxr([1,,.0713,,.1467,.5483,,-.4465,,,,,,,,,,,1,,,.0639,,.5]),pickupSound=jsfxr([0,,.0224,.441,.1886,.6932,,,,,,,,,,,,,1,,,,,.5]),spawnSound=jsfxr([2,.28,.45,,.56,.35,,.4088,,,,,.03,.1557,,.5565,-.02,-.02,1,,,,,.5]),explosionSound=jsfxr([3,,.244,.6411,.2242,.7416,,-.2717,,,,.0171,.0346,,,,-.0305,.0244,1,,,.0275,-.0076,.5]),menuSound=jsfxr([0,,.1394,,.0864,.48,,,,,,,,.5326,,,,,1,,,.1,,.5]),saySound=jsfxr([2,.03,.1,.14,.25,.54,.3167,-.02,.3999,,.05,,,.1021,.0684,,.1287,-.1816,1,,,,,.46]),landSound=jsfxr([3,,.0118,.03,.1681,.565,,-.2343,,,,.26,.6855,,,,,,1,,,,,.2]),fixedSound=jsfxr([0,,.2098,,.4725,.3665,,.1895,,,,,,.0067,,.5437,,,1,,,,,.45]),w.down={},onkeydown=(t=>{w.down[t.keyCode]=1}),onkeyup=(t=>{w.down[t.keyCode]=0});class Game{constructor(){(G=this).clock=0,this.level=new Level(LEVELS[0])}cycle(t){this.level.cycle(t),this.render()}render(){R.fillStyle="#585a7f",fr(0,0,1600,800),wrap(()=>{translate(400,0),this.level.render()})}}onload=(()=>{onresize(),CANVAS.width=1600,CANVAS.height=800,R=CANVAS.getContext("2d"),Object.getOwnPropertyNames(canvasProto).forEach(t=>{R[t].call&&(w[t]=canvasProto[t].bind(R))}),console.log("LOADED"),new Game;let t=Date.now(),e=()=>{let s=Date.now(),i=(s-t)/1e3;t=s,G.cycle(i),requestAnimationFrame(e)};e()});</script>